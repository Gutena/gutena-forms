!function(){"use strict";var e=window.wp.element,t=window.wp.blocks,a=window.wp.i18n,l=window.wp.hooks,n=window.wp.blockEditor;const r=e=>null==e||""==e;var o=window.wp.data,s=window.wp.components;const i=(e,t)=>{const a=(0,o.select)("core/block-editor").getClientIdsWithDescendants();return!r(a)&&a.some((a=>{const{nameAttr:l}=(0,o.select)("core/block-editor").getBlockAttributes(a);return t!==a&&l===e}))};var u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"gutena/form-field","version":"1.0.0","title":"Form field","parent":["gutena/forms"],"category":"gutena","icon":"feedback","description":"Form field","attributes":{"nameAttr":{"type":"string","default":"input_1"},"fieldName":{"type":"string","default":"Name"},"fieldClasses":{"type":"string","default":""},"fieldType":{"type":"string","default":"text"},"isRequired":{"type":"boolean","default":false},"placeholder":{"type":"string","default":""},"defaultValue":{"type":"string","default":""},"autocomplete":{"type":"boolean","default":false},"autoCapitalize":{"type":"boolean","default":false},"textAreaRows":{"type":"number","default":5},"maxlength":{"type":"number","default":""},"minMaxStep":{"type":"object","default":{}},"preFix":{"type":"string","default":""},"sufFix":{"type":"string","default":""},"selectOptions":{"type":"array","default":["Big","Medium","Small"]},"optionsColumns":{"type":"number","default":1},"optionsInline":{"type":"boolean","default":false},"multiSelect":{"type":"boolean","default":false},"errorRequiredMsg":{"type":"string","default":"Field is required"},"errorInvalidInputMsg":{"type":"string","default":"Input is not valid"},"description":{"type":"string","default":""},"settings":{"type":"object","default":{}}},"usesContext":["gutena-forms/formID"],"supports":{"__experimentalSettings":true,"align":["wide","full"],"color":{"background":true,"text":true},"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true,"__experimentalDefaultControls":{"color":true,"radius":true,"style":true,"width":true}},"spacing":{"margin":true,"padding":true,"blockGap":{"__experimentalDefault":"2em","sides":["horizontal","vertical"]}},"html":false},"textdomain":"gutena-forms","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}');(0,t.registerBlockType)(u,{icon:()=>(0,e.createElement)(s.Icon,{icon:()=>(0,e.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("rect",{x:"2",y:"4",width:"8",height:"2",fill:"#0EA489"}),(0,e.createElement)("rect",{x:"2",y:"11",width:"8",height:"2",fill:"#0EA489"}),(0,e.createElement)("rect",{x:"14",y:"4",width:"8",height:"2",fill:"#0EA489"}),(0,e.createElement)("rect",{x:"14",y:"11",width:"8",height:"2",fill:"#0EA489"}),(0,e.createElement)("rect",{x:"2",y:"18",width:"20",height:"2",fill:"#0EA489"}))}),edit:function(t){let{className:u,attributes:c,setAttributes:m,isSelected:p,clientId:d,context:f,gutenaExtends:g={}}=t;const{nameAttr:x,fieldName:h,fieldClasses:_,fieldType:b,isRequired:E,placeholder:y,defaultValue:v,autocomplete:w,autoCapitalize:C,textAreaRows:k,maxlength:N,minMaxStep:S,preFix:q,sufFix:T,selectOptions:A,optionsColumns:F,optionsInline:R,multiSelect:I,errorRequiredMsg:B,errorInvalidInputMsg:M,description:P,settings:O,style:D}=c,j=[{label:"Text",value:"text"},{label:"Number",value:"number"},{label:"Range",value:"range"},{label:"TextArea",value:"textarea"},{label:"Email",value:"email"},{label:"Dropdown",value:"select"},{label:"Radio",value:"radio"},{label:"Checkbox",value:"checkbox"}];let $=[];(0,l.hasFilter)("gutenaforms.field.types")&&($=(0,l.applyFilters)("gutenaforms.field.types",$));const V=r($)||0===$.length?j:[...j,...$],z=r($)||0===$.length?[]:$.map((e=>e.value)),[L,W]=(0,e.useState)(A[0]),[G,H]=(0,e.useState)(""),J=(0,o.useSelect)((e=>{let t=e(n.store).getAdjacentBlockClientId(d,-1);return r(t)&&(t=e(n.store).getAdjacentBlockClientId(d,1)),t}),[]),U=(0,o.useSelect)((e=>{if(r(J))return null;let t=e(n.store).getBlockAttributes(J);return r(t)||r(t.content)?"":t.content.replace(/(<([^>]+)>)|\*/gi,"").trim()}),[J]),{updateBlockAttributes:K}=(0,o.useDispatch)(n.store),[Q,X]=(0,e.useState)(!1);(0,e.useEffect)((()=>{if("input_1"==x||""==x)X(!0);else if(!r(x)&&i(x,d)){X(!0);let e=x+"_copy_1",t=h+" copy 1";if(x.includes("_copy_")){let a=x.split("_copy_");e=a[0]+"_copy_",a=parseInt(a[1])+1,e+=a,t=h.split(" copy "),t=t[0]+" copy "+a}m({nameAttr:e,fieldName:t})}}),[]);const Y=e=>(e=e.toLowerCase().replace(/ /g,"_")).replace(/\W/g,""),Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Q&&!r(e)?m({fieldName:e,nameAttr:Y(e)}):m({fieldName:e}),t&&!r(J)&&K(J,{content:e})};(0,e.useEffect)((()=>{let e=!0;return e&&Z(U),()=>{e=!1}}),[U]);const ee=()=>{let e=document.querySelector('.block-editor-block-styles__variants [aria-label="Border Style"]');r(e)||(e.style.display=p&&"range"===b?"inline-block":"none")};(0,e.useEffect)((()=>{let e=!0;return e&&ee(),()=>{e=!1}}),[p]),(0,e.useEffect)((()=>{let e=!0;if(e){ee();let e=`gutena-forms-field ${b}-field ${E?"required-field":""} ${w?"autocomplete":""} `;-1!==["radio","checkbox"].indexOf(b)&&(e+=R?" inline-options":" has-"+F+"-col"),m({fieldClasses:e})}return()=>{e=!1}}),[b,E,R,F]);const te=(0,n.useBlockProps)({className:`gutena-forms-${b}-field field-name-${x}`});return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.InspectorControls,null,(0,e.createElement)(s.PanelBody,{title:(0,a.__)("Field Type","gutena-forms"),initialOpen:!0},(0,e.createElement)(s.SelectControl,{value:b,options:V,onChange:e=>m({fieldType:e}),help:(0,a.__)("Select appropriate field type for input","gutena-forms"),__nextHasNoMarginBottom:!0}),!r(g?.gfcontrols)&&g.gfcontrols(),-1!==["select","checkbox","radio"].indexOf(b)&&(0,e.createElement)(s.FormTokenField,{label:w?(0,a.__)("Preferences","gutena-forms"):(0,a.__)("Options","gutena-forms"),value:A,suggestions:A,onChange:e=>m({selectOptions:e})}),-1!==["radio","checkbox"].indexOf(b)&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(s.ToggleControl,{label:(0,a.__)("Show Inline","gutena-forms"),className:"gf-mt-1",help:R?(0,a.__)("Toggle to make options show in columns","gutena-forms"):(0,a.__)("Toggle to make options show inline","gutena-forms"),checked:R,onChange:e=>m({optionsInline:e})}),!R&&(0,e.createElement)(s.RangeControl,{label:(0,a.__)("Columns","gutena-forms"),value:F,onChange:e=>m({optionsColumns:e}),min:1,max:6,step:1})),("number"===b||"range"===b)&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h2",{className:"block-editor-block-card__title gf-mt-1 "},(0,a.__)("Value","gutena-forms")),(0,e.createElement)(s.PanelRow,{className:"gf-child-mb-0 gf-mb-24"},(0,e.createElement)(s.TextControl,{label:(0,a.__)("Minimum","gutena-forms"),value:S?.min,type:"number",onChange:e=>m({minMaxStep:{...S,min:e}})}),(0,e.createElement)(s.TextControl,{label:(0,a.__)("Maximum","gutena-forms"),value:S?.max,type:"number",onChange:e=>m({minMaxStep:{...S,max:e}})}),(0,e.createElement)(s.TextControl,{label:(0,a.__)("Step","gutena-forms"),value:S?.step,type:"number",onChange:e=>m({minMaxStep:{...S,step:e}})})),(0,e.createElement)(s.PanelRow,{className:"gf-child-mb-0 gf-mb-24"},(0,e.createElement)(s.TextControl,{label:(0,a.__)("Prefix","gutena-forms"),value:q,onChange:e=>m({preFix:e})}),(0,e.createElement)(s.TextControl,{label:(0,a.__)("Suffix","gutena-forms"),value:T,onChange:e=>m({sufFix:e})})))),(0,e.createElement)(s.PanelBody,{title:(0,a.__)("Field settings","gutena-forms"),initialOpen:!0},(0,e.createElement)(s.TextControl,{label:(0,a.__)("Label","gutena-forms")+" * ",className:r(h)?" gf-required-field":"",help:r(h)?(0,a.__)("Please add label to the field","gutena-forms"):"",value:h,onChange:e=>Z(e,!0)}),(0,e.createElement)(s.TextControl,{label:(0,a.__)("Unique Name Attribute","gutena-forms")+" * ",className:i(x,d)?" gf-required-field":"",help:i(x,d)?(0,a.__)("Duplicate field name. Please provide unique name","gutena-forms"):(0,a.__)("Contains only letters, numbers, and underscore. e.g. first_name","gutena-forms"),value:x,onChange:e=>m({nameAttr:Y(e)})}),-1!==["text","textarea"].indexOf(b)&&(0,e.createElement)(s.RangeControl,{label:(0,a.__)("Maxlength","gutena-forms"),value:N,onChange:e=>m({maxlength:e}),min:0,max:500,step:25}),"textarea"===b&&(0,e.createElement)(s.RangeControl,{label:(0,a.__)("Textarea Rows","gutena-forms"),value:k,onChange:e=>m({textAreaRows:e}),min:2,max:20,step:1}),(0,e.createElement)(s.PanelRow,null,(0,e.createElement)(s.TextControl,{label:(0,a.__)("Placeholder","gutena-forms"),value:y,onChange:e=>m({placeholder:e})})),(0,e.createElement)(s.PanelRow,null,(0,e.createElement)(s.ToggleControl,{label:(0,a.__)("Required","gutena-forms"),help:E?(0,a.__)("Toggle to make input field not required","gutena-forms"):(0,a.__)("Toggle to make input field required","gutena-forms"),checked:E,onChange:e=>m({isRequired:e})})))),(0,e.createElement)("div",te,b.length>0?0<=["text","email","number","hidden","tel","url"].indexOf(b)?(0,e.createElement)("input",{type:b,className:_,placeholder:y||(0,a.__)("Placeholder…"),required:E?"required":""}):"range"===b?(0,e.createElement)("div",{className:"gf-range-container"},(0,e.createElement)("input",{type:b,className:_,required:E?"required":"",value:G,onChange:e=>H(e.target.value)}),(0,e.createElement)("p",{className:"gf-range-values"},!r(S?.min)&&(0,e.createElement)("span",{className:"gf-prefix-value-wrapper"},(0,e.createElement)("span",{className:"gf-prefix"},r(q)?"":q),(0,e.createElement)("span",{className:"gf-value"},S?.min),(0,e.createElement)("span",{className:"gf-suffix"},r(T)?"":T)),!r(G)&&(0,e.createElement)("span",{className:"gf-prefix-value-wrapper"},(0,e.createElement)("span",{className:"gf-prefix"},r(q)?"":q),(0,e.createElement)("span",{className:"gf-value range-input-value"},G),(0,e.createElement)("span",{className:"gf-suffix"},r(T)?"":T)),!r(S?.max)&&(0,e.createElement)("span",{className:"gf-prefix-value-wrapper"},(0,e.createElement)("span",{className:"gf-prefix"},r(q)?"":q),(0,e.createElement)("span",{className:"gf-value"},S?.max),(0,e.createElement)("span",{className:"gf-suffix"},r(T)?"":T)))):"textarea"===b?(0,e.createElement)("textarea",{className:_,placeholder:y||(0,a.__)("Placeholder…"),required:E?"required":"",rows:k}):"select"===b?(0,e.createElement)("select",{className:_,value:L,onChange:e=>W(e.target.value),required:E?"required":""},A.map(((t,a)=>(0,e.createElement)("option",{key:a,value:t},t)))):"radio"===b||"checkbox"===b?(0,e.createElement)("div",{className:_},A.map(((t,a)=>(0,e.createElement)("label",{key:a,className:b+"-container"},t,(0,e.createElement)("input",{type:b,name:h,value:t,checked:t===L,onChange:e=>W(e.target.value)}),(0,e.createElement)("span",{className:"checkmark"}))))):!r(g?.inputFieldComponent)&&0<=z.indexOf(b)?g.inputFieldComponent():void 0:""))}})}();