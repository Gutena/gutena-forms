document.addEventListener("DOMContentLoaded",(function(){const e=e=>null==e||""==e,t=(e,t)=>(" "+e.className+" ").indexOf(" "+t+" ")>-1,r=(e,t)=>{let r=[];for(;e.parentNode!==document.body;)e.matches(t)&&r.push(e),e=e.parentNode;return r},o=(r,o,l,n,s)=>{console.log("gutena_forms,  form_data, submitButton, submitBtnLink, submitBtnLinkHtml"),fetch(gutenaFormsBlock.ajax_url,{method:"POST",credentials:"same-origin",body:o}).then((e=>e.json())).then((o=>{if(l.disabled=!1,n.innerHTML=s,r.classList.remove("form-progress"),e(o)||"error"!==o.status){if(r.reset(),r.classList.add("display-success-message"),t(r,"hide-form-after-submit")&&r.classList.add("hide-form-now"),t(r,"after_submit_redirect_url")){let t=r.querySelector('input[name="redirect_url"]');(e(t)||0===t.length)&&console.log("redirect_url not found"),t=t.value,e(t)?console.log("redirect_url",t):setTimeout((()=>{location.href=t}),2e3)}}else{r.classList.add("display-error-message");let t=r.querySelector(".wp-block-gutena-form-error-msg .gutena-forms-error-text");(e(t)||0===t.length)&&console.log("errorMsgElement not found"),t.innerHTML=o.message,console.log("Form Message",o)}}))},l=o=>{if(e(o))return console.log("No input fields found"),!1;let l="",n=t(o,"required-field"),s=r(o,".wp-block-gutena-field-group");if(e(s))return console.log("field_group not defined"),!1;s=s[0];let i=t(o,"checkbox-field")||t(o,"radio-field");if(i){let t=o.querySelectorAll("input");if(e(t))return console.log("checkboxRadioHtml not defined"),!1;for(let e=0;e<t.length;e++)if(t[e].checked){l=t[e].value;break}}else l=o.value;let a=s.querySelector(".gutena-forms-field-error-msg");if(e(a))return console.log("errorHTML not defined"),!1;if(s.classList.remove("display-error"),n&&(e(l)||t(o,"select-field")&&"select"===l)){s.classList.add("display-error");let e=gutenaFormsBlock.required_msg;return t(o,"select-field")&&(e=gutenaFormsBlock.required_msg_select),i&&(e=gutenaFormsBlock.required_msg_check),a.innerHTML=e,!1}if(!e(l)&&t(o,"email-field")&&!l.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/))return s.classList.add("display-error"),a.innerHTML=gutenaFormsBlock.invalid_email_msg,!1;if(!e(l)&&t(o,"number-field")){let t=o.getAttribute("min"),r=o.getAttribute("max");if(!e(t)&&l<t)return s.classList.add("display-error"),a.innerHTML=gutenaFormsBlock.min_value_msg+" "+t,!1;if(!e(r)&&l>r)return s.classList.add("display-error"),a.innerHTML=gutenaFormsBlock.max_value_msg+" "+r,!1}return!0},n=(t,r)=>{if(!e(t)){let o=t.querySelector(".range-input-value");e(t)||(o.innerHTML=r)}};(()=>{let e=document.querySelectorAll(".wp-block-gutena-forms .range-field");if(0<e.length)for(let t=0;t<e.length;t++)n(e[t].parentNode,e[t].value),e[t].addEventListener("input",(function(){n(this.parentNode,this.value)}))})(),(()=>{let e=document.querySelectorAll(".wp-block-gutena-forms .gutena-forms-field");if(0<e.length)for(let t=0;t<e.length;t++)e[t].addEventListener("input",(function(){l(e[t])}))})(),(()=>{let t=document.querySelectorAll(".wp-block-gutena-forms .gutena-forms-submit-button");if(0<t.length)for(let n=0;n<t.length;n++)t[n].addEventListener("click",(function(s){s.preventDefault();let i=r(this,".wp-block-gutena-forms");if(void 0===i)return void console.log("Form not defined");i=i[0];let a=i.querySelectorAll(".gutena-forms-field");if(0===a.length)return void console.log("No input fields found");let c=!0,d=a[0];for(let e=0;e<a.length;e++)!1===l(a[e])&&(!0===c&&(d=a[e]),c=!1);if(!1===c)return i.classList.add("display-error-message"),void d.scrollIntoView({behavior:"smooth"});i.classList.add("form-progress");let u=this.querySelector(".wp-block-button__link"),m=u.innerHTML;this.disabled=!0,u.innerHTML='<div class="gutena-forms-btn-progress"><div></div><div></div><div></div><div></div></div>';let g=new FormData(i);if(g.append("nonce",gutenaFormsBlock.nonce),g.append("action",gutenaFormsBlock.submit_action),i.classList.remove("display-error-message"),i.classList.remove("display-success-message"),e(gutenaFormsBlock.grecaptcha_type)||"v3"!==gutenaFormsBlock.grecaptcha_type||e(gutenaFormsBlock.grecaptcha_site_key))o(i,g,t[n],u,m);else{let e=i.querySelector('input[name="recaptcha_enable"]');0!=e.length&&e.value?grecaptcha.ready((function(){grecaptcha.execute(gutenaFormsBlock.grecaptcha_site_key,{action:"submit"}).then((function(e){g.append("g-recaptcha-response",e),o(i,g,t[n],u,m)}))})):o(i,g,t[n],u,m)}}))})()}));