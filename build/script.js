document.addEventListener("DOMContentLoaded",(function(){const e=e=>null==e||""==e,t=(e,t)=>(" "+e.className+" ").indexOf(" "+t+" ")>-1,r=(e,t)=>{let r=[];for(;e.parentNode!==document.body;)e.matches(t)&&r.push(e),e=e.parentNode;return r},o=(r,o,s,l,n)=>{console.log("gutena_forms,  form_data, submitButton, submitBtnLink, submitBtnLinkHtml"),fetch(gutenaFormsBlock.ajax_url,{method:"POST",credentials:"same-origin",body:o}).then((e=>e.json())).then((o=>{if(s.disabled=!1,l.innerHTML=n,r.classList.remove("form-progress"),e(o)||"error"!==o.status){if(r.reset(),r.classList.add("display-success-message"),t(r,"hide-form-after-submit")&&r.classList.add("hide-form-now"),t(r,"after_submit_redirect_url")){let t=r.querySelector('input[name="redirect_url"]');(e(t)||0===t.length)&&console.log("redirect_url not found"),t=t.value,e(t)?console.log("redirect_url",t):setTimeout((()=>{location.href=t}),2e3)}}else{r.classList.add("display-error-message");let t=r.querySelector(".wp-block-gutena-form-error-msg .gutena-forms-error-text");(e(t)||0===t.length)&&console.log("errorMsgElement not found"),t.innerHTML=o.message,console.log("Form Message",o)}}))},s=r=>{if(e(r))return console.log("No input fields found"),!1;let o="",s=t(r,"required-field"),l=r.parentNode.parentNode.parentNode,n=t(r,"checkbox-field")||t(r,"radio-field");if(n){let t=r.querySelectorAll("input");if(e(t))return console.log("checkboxRadioHtml not defined"),!1;for(let e=0;e<t.length;e++)if(t[e].checked){o=t[e].value;break}}else o=r.value;if(e(l))return console.log("field_group not defined"),!1;let i=l.querySelector(".gutena-forms-field-error-msg");if(e(i))return console.log("errorHTML not defined"),!1;if(l.classList.remove("display-error"),s&&(e(o)||t(r,"select-field")&&"select"===o)){l.classList.add("display-error");let e=gutenaFormsBlock.required_msg;return t(r,"select-field")&&(e=gutenaFormsBlock.required_msg_select),n&&(e=gutenaFormsBlock.required_msg_check),i.innerHTML=e,!1}return!(!e(o)&&t(r,"email-field")&&(a=o,!a.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/))&&(l.classList.add("display-error"),i.innerHTML=gutenaFormsBlock.invalid_email_msg,1));var a};(()=>{let t=document.querySelectorAll(".wp-block-gutena-forms .gutena-forms-submit-button");if(0<t.length)for(let l=0;l<t.length;l++)t[l].addEventListener("click",(function(n){n.preventDefault();let i=r(this,".wp-block-gutena-forms");if(void 0===i)return void console.log("Form not defined");i=i[0];let a=i.querySelectorAll(".gutena-forms-field");if(0===a.length)return void console.log("No input fields found");let c=!0,d=a[0];for(let e=0;e<a.length;e++)!1===s(a[e])&&(!0===c&&(d=a[e]),c=!1);if(!1===c)return i.classList.add("display-error-message"),void d.scrollIntoView({behavior:"smooth"});i.classList.add("form-progress");let u=this.querySelector(".wp-block-button__link"),m=u.innerHTML;this.disabled=!0,u.innerHTML='<div class="gutena-forms-btn-progress"><div></div><div></div><div></div><div></div></div>';let g=new FormData(i);if(g.append("nonce",gutenaFormsBlock.nonce),g.append("action",gutenaFormsBlock.submit_action),i.classList.remove("display-error-message"),i.classList.remove("display-success-message"),e(gutenaFormsBlock.grecaptcha_type)||"v3"!==gutenaFormsBlock.grecaptcha_type||e(gutenaFormsBlock.grecaptcha_site_key))o(i,g,t[l],u,m);else{let e=i.querySelector('input[name="recaptcha_enable"]');0!=e.length&&e.value?grecaptcha.ready((function(){grecaptcha.execute(gutenaFormsBlock.grecaptcha_site_key,{action:"submit"}).then((function(e){g.append("g-recaptcha-response",e),o(i,g,t[l],u,m)}))})):o(i,g,t[l],u,m)}}))})(),(()=>{let e=document.querySelectorAll(".wp-block-gutena-forms .gutena-forms-field");if(0<e.length)for(let t=0;t<e.length;t++)e[t].addEventListener("input",(function(){s(e[t])}))})()}));